@if(isModalOpen()){
<div
  class="z-50 fixed inset-0 place-content-center grid bg-black/50 p-4"
  role="dialog"
  aria-modal="true"
  aria-labelledby="modalTitle"
>
  <div class="bg-gray-100 dark:bg-gray-800 shadow-lg p-6 rounded-3xl w-md">
    <div class="flex justify-between items-start">
      <div class="flex flex-col">
        <h4 id="modalTitle" class="font-bold text-gray-900 dark:text-white text-xl">
          Organizations
        </h4>
        <p>Select a organization to active</p>
      </div>

      <button
        type="button"
        (click)="toggleModalOpen()"
        class="hover:bg-gray-50 dark:hover:bg-gray-800 -me-4 -mt-4 p-2 rounded-full focus:outline-none text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 dark:text-gray-500 transition-colors cursor-pointer"
      >
        <ng-icon name="heroXMarkSolid" />
      </button>
    </div>

    <div class="mt-4">
      <div class="flex justify-center gap-2 p-4 overflow-x-auto">
        @for (organization of organizations; track organization.id) {
        <div
          [attr.data-current]="currentOrgId === organization.id"
          class="flex flex-col flex-shrink-0 items-center bg-gray-200 data-[current=true]:bg-emerald-500! dark:bg-gray-700 hover:shadow-lg p-3 border border-gray-300 data-[current=true]:border-green-500! hover:border-green-500! dark:border-gray-600 rounded-lg w-24 h-36 transition-all duration-200 cursor-pointer data-[current=true]:pointer-events-none"
          (click)="selectOrganization(organization)"
        >
          <div
            class="flex justify-center items-center bg-gray-400 dark:bg-gray-700 mb-2 border border-gray-600 rounded-lg w-16 h-16 overflow-hidden"
          >
            @if(organization.logo){<img
              [src]="organization.logo"
              alt="{{ organization.name }}"
              class="w-full h-full object-contain"
            />} @else {
            <p class="flex justify-center items-center w-full h-full text-3xl text-center">
              {{ getInitials(organization.name) }}
            </p>
            }
          </div>
          <p class="font-medium dark:text-gray-200 text-xs text-center text-wrap">
            {{ organization.name }}
          </p>
        </div>
        }
      </div>
    </div>
  </div>
</div>
}
