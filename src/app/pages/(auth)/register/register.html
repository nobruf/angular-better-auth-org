<div class="flex justify-center items-center h-screen">
  <!-- Main Container -->
  <div class="relative mx-auto w-full max-w-6xl">
    <div
      class="bg-white/50 dark:bg-gray-800/50 shadow-2xl backdrop-blur-xl border border-gray-200/50 dark:border-gray-700/50 rounded-3xl overflow-hidden"
    >
      <div class="grid lg:grid-cols-2 min-h-[400px] md:min-h-[500px]">
        <!-- Left Side - Register Form -->
        <div class="flex flex-col justify-center p-4 md:p-6 lg:p-8">
          <!-- Header -->
          <div class="mb-4 md:mb-6">
            <div
              class="inline-flex items-center gap-2 bg-emerald-500/10 mb-2 md:mb-3 px-2 py-1 border border-emerald-500/20 rounded-full font-medium text-emerald-400 text-xs"
            >
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path
                  fill-rule="evenodd"
                  d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                  clip-rule="evenodd"
                ></path>
              </svg>
              Better Auth Org
            </div>
            <h1 class="mb-2 font-bold text-gray-900 dark:text-white md:text-xl">
              {{ currentStep === 1 ? 'Create your account' : 'Setup your organization' }}
            </h1>
            <p class="text-gray-600 dark:text-gray-400 text-xs md:text-sm lg:text-base">
              {{
                currentStep === 1
                  ? 'Fill in your details to get started'
                  : 'Choose a plan and configure your organization'
              }}
            </p>
          </div>

          <!-- Progress Bar -->
          <div class="mb-6">
            <div class="flex justify-between items-center mb-2">
              <span class="text-xs text-gray-600 dark:text-gray-400"
                >Step {{ currentStep }} of {{ totalSteps }}</span
              >
              <span class="text-xs text-emerald-600 dark:text-emerald-400"
                >{{ getStepProgress() | number : '1.0-0' }}%</span
              >
            </div>
            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
              <div
                class="bg-emerald-500 h-2 rounded-full transition-all duration-300"
                [style.width.%]="getStepProgress()"
              ></div>
            </div>
          </div>

          <!-- Step 1: User Registration -->
          @if (currentStep === 1) {
          <div>
            <form [formGroup]="userForm" class="flex flex-col gap-4">
              <!-- Name Input -->
              <app-input
                formControlName="name"
                type="text"
                label="Full Name"
                placeholder="Enter your full name"
                size="md"
                variant="default"
                [error]="
                  userForm.get('name')?.invalid && userForm.get('name')?.touched
                    ? (userForm.get('name')?.errors?.['required'] ? 'Name is required' : 
                       userForm.get('name')?.errors?.['minlength'] ? 'Name must be at least 2 characters' : '')
                    : ''
                "
              ></app-input>

              <!-- Email Input -->
              <app-input
                formControlName="email"
                type="email"
                label="Email"
                placeholder="Enter your email"
                size="md"
                variant="default"
                [error]="
                  userForm.get('email')?.invalid && userForm.get('email')?.touched
                    ? (userForm.get('email')?.errors?.['required'] ? 'Email is required' : 
                       userForm.get('email')?.errors?.['email'] ? 'Enter a valid email' : '')
                    : ''
                "
              ></app-input>

              <!-- Password Input -->
              <app-input
                formControlName="password"
                type="password"
                label="Password"
                placeholder="Enter your password"
                size="md"
                variant="default"
                [error]="
                  userForm.get('password')?.invalid && userForm.get('password')?.touched
                    ? (userForm.get('password')?.errors?.['required'] ? 'Password is required' : 
                       userForm.get('password')?.errors?.['minlength'] ? 'Password must be at least 6 characters' : '')
                    : ''
                "
              ></app-input>

              <!-- Next Button -->
              <div class="mt-4">
                <app-button
                  type="button"
                  variant="primary"
                  size="md"
                  [disabled]="userForm.invalid"
                  [fullWidth]="true"
                  (onClick)="nextStep()"
                >
                  <svg
                    slot="icon-right"
                    class="w-5 h-5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M9 5l7 7-7 7"
                    ></path>
                  </svg>
                  Continue
                </app-button>
              </div>
            </form>
          </div>
          }

          <!-- Step 2: Organization Setup -->
          @if (currentStep === 2) {
          <div>
            <form [formGroup]="organizationForm" class="flex flex-col gap-4">
              <!-- Organization Name Input -->
              <app-input
                formControlName="organizationName"
                type="text"
                label="Organization Name"
                placeholder="Enter your organization name"
                size="md"
                variant="default"
                [error]="
                  organizationForm.get('organizationName')?.invalid && organizationForm.get('organizationName')?.touched
                    ? (organizationForm.get('organizationName')?.errors?.['required'] ? 'Organization name is required' : 
                       organizationForm.get('organizationName')?.errors?.['minlength'] ? 'Name must be at least 2 characters' : '')
                    : ''
                "
              ></app-input>

              <!-- Plans Selection -->
              <div class="space-y-3">
                <label class="block text-sm font-medium text-gray-900 dark:text-white mb-3"
                  >Choose your plan</label
                >

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  @for (plan of plans; track plan.id) {
                  <div class="relative cursor-pointer" (click)="selectPlan(plan.id)">
                    <div
                      class="border rounded-xl p-4 transition-all duration-200 h-full"
                      [class]="
                        organizationForm.get('plan')?.value === plan.id
                          ? 'border-emerald-500 bg-emerald-500/10'
                          : 'border-gray-600 hover:border-gray-500'
                      "
                    >
                      <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center gap-3">
                          <input
                            type="radio"
                            [value]="plan.id"
                            [checked]="organizationForm.get('plan')?.value === plan.id"
                            class="w-4 h-4 text-emerald-600 bg-gray-700 border-gray-600 focus:ring-emerald-500"
                          />
                          <div>
                            <h3 class="font-semibold text-gray-900 dark:text-white text-lg">
                              {{ plan.name }}
                            </h3>
                            <div class="flex items-baseline gap-1">
                              <span class="text-3xl font-bold text-gray-900 dark:text-white">{{
                                plan.price
                              }}</span>
                              <span class="text-gray-400 text-sm">{{ plan.period }}</span>
                            </div>
                          </div>
                        </div>
                        @if (plan.popular) {
                        <div class="bg-emerald-500 text-white text-xs px-2 py-1 rounded-full">
                          Popular
                        </div>
                        }
                      </div>

                      <ul class="text-sm text-gray-300 space-y-2">
                        @for (feature of plan.features; track feature) {
                        <li class="flex items-center gap-2">
                          <svg
                            class="w-4 h-4 text-emerald-400 flex-shrink-0"
                            fill="currentColor"
                            viewBox="0 0 20 20"
                          >
                            <path
                              fill-rule="evenodd"
                              d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                              clip-rule="evenodd"
                            ></path>
                          </svg>
                          <span>{{ feature }}</span>
                        </li>
                        }
                      </ul>
                    </div>
                  </div>
                  }
                </div>
              </div>

              <!-- Navigation Buttons -->
              <div class="grid grid-cols-2 gap-3 mt-6">
                <app-button
                  type="button"
                  variant="secondary"
                  size="md"
                  [fullWidth]="true"
                  (onClick)="previousStep()"
                >
                  <svg
                    slot="icon-left"
                    class="w-5 h-5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M15 19l-7-7 7-7"
                    ></path>
                  </svg>
                  Back
                </app-button>

                <app-button
                  type="button"
                  variant="primary"
                  size="md"
                  [disabled]="organizationForm.invalid"
                  [fullWidth]="true"
                  (onClick)="submit()"
                >
                  <svg
                    slot="icon-right"
                    class="w-5 h-5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"
                    ></path>
                  </svg>
                  Create Account
                </app-button>
              </div>
            </form>
          </div>
          }

          <!-- Login Link -->
          <div class="text-center mt-6">
            <p class="text-gray-400 text-xs">
              Already have an account?
              <a
                href="/login"
                class="font-medium text-emerald-400 hover:text-emerald-300 transition-colors duration-200"
              >
                Login
              </a>
            </p>
          </div>
        </div>

        <!-- Right Side - Features -->
        <div
          class="relative flex flex-col justify-center bg-gradient-to-br from-emerald-500/10 to-emerald-600/5 p-4 md:p-6 lg:p-8 overflow-hidden"
        >
          <div class="z-10 relative">
            <!-- Header -->
            <div class="mb-6 md:mb-8 text-center">
              <div
                class="inline-flex justify-center items-center bg-emerald-500/20 mb-3 md:mb-4 rounded-2xl w-12 md:w-14 h-12 md:h-14"
              >
                <svg
                  class="w-5 md:w-6 h-5 md:h-6 text-emerald-400"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 2L2 7L12 12L22 7L12 2Z"
                  ></path>
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M2 17L12 22L22 17"
                  ></path>
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M2 12L12 17L22 12"
                  ></path>
                </svg>
              </div>
              <h2 class="mb-2 font-bold text-gray-900 dark:text-white text-lg md:text-xl">
                {{ currentStep === 1 ? 'Start your journey' : 'Choose the best plan' }}
              </h2>
            </div>

            <!-- Features List -->
            <div class="space-y-3 md:space-y-4">
              <!-- Feature 1 -->
              <div
                class="flex items-start gap-2 md:gap-3 bg-white/5 hover:bg-white/10 p-2 md:p-3 border border-white/10 rounded-xl transition-all duration-200"
              >
                <div
                  class="flex flex-shrink-0 justify-center items-center bg-emerald-500/20 rounded-lg w-8 md:w-9 h-8 md:h-9"
                >
                  <svg
                    class="w-3 md:w-4 h-3 md:h-4 text-emerald-400"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M16 21V19C16 17.9391 15.5786 16.9217 14.8284 16.1716C14.0783 15.4214 13.0609 15 12 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21"
                    ></path>
                    <circle
                      cx="8.5"
                      cy="7"
                      r="4"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    ></circle>
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M20 8V14L17 11L20 8Z"
                    ></path>
                  </svg>
                </div>
                <div>
                  <h3
                    class="mb-1 font-semibold text-gray-900 dark:text-white text-xs md:text-sm lg:text-lg"
                  >
                    {{ currentStep === 1 ? 'Team Management' : 'Professional Plan' }}
                  </h3>
                  <p class="text-gray-600 dark:text-gray-300 text-xs">
                    {{
                      currentStep === 1
                        ? 'Organize and manage your team with powerful tools'
                        : 'Ideal for growing teams with advanced features'
                    }}
                  </p>
                </div>
              </div>

              <!-- Feature 2 -->
              <div
                class="flex items-start gap-2 md:gap-3 bg-white/5 hover:bg-white/10 p-2 md:p-3 border border-white/10 rounded-xl transition-all duration-200"
              >
                <div
                  class="flex flex-shrink-0 justify-center items-center bg-emerald-500/20 rounded-lg w-8 md:w-9 h-8 md:h-9"
                >
                  <svg
                    class="w-3 md:w-4 h-3 md:h-4 text-emerald-400"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <rect
                      x="3"
                      y="3"
                      width="18"
                      height="18"
                      rx="2"
                      ry="2"
                      stroke="currentColor"
                      stroke-width="2"
                    ></rect>
                    <circle cx="9" cy="9" r="2" stroke="currentColor" stroke-width="2"></circle>
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M21 15L16 10L5 21"
                    ></path>
                  </svg>
                </div>
                <div>
                  <h3
                    class="mb-1 font-semibold text-gray-900 dark:text-white text-xs md:text-sm lg:text-lg"
                  >
                    {{ currentStep === 1 ? 'Analytics Dashboard' : 'Priority Support' }}
                  </h3>
                  <p class="text-gray-600 dark:text-gray-300 text-xs">
                    {{
                      currentStep === 1
                        ? 'Get insights into your organization performance'
                        : 'Specialized support to resolve your questions quickly'
                    }}
                  </p>
                </div>
              </div>

              <!-- Feature 3 -->
              <div
                class="flex items-start gap-2 md:gap-3 bg-white/5 hover:bg-white/10 p-2 md:p-3 border border-white/10 rounded-xl transition-all duration-200"
              >
                <div
                  class="flex flex-shrink-0 justify-center items-center bg-emerald-500/20 rounded-lg w-8 md:w-9 h-8 md:h-9"
                >
                  <svg
                    class="w-3 md:w-4 h-3 md:h-4 text-emerald-400"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <rect
                      x="2"
                      y="3"
                      width="20"
                      height="14"
                      rx="2"
                      ry="2"
                      stroke="currentColor"
                      stroke-width="2"
                    ></rect>
                    <line
                      x1="8"
                      y1="21"
                      x2="16"
                      y2="21"
                      stroke="currentColor"
                      stroke-width="2"
                    ></line>
                    <line
                      x1="12"
                      y1="17"
                      x2="12"
                      y2="21"
                      stroke="currentColor"
                      stroke-width="2"
                    ></line>
                  </svg>
                </div>
                <div>
                  <h3
                    class="mb-1 font-semibold text-gray-900 dark:text-white text-xs md:text-sm lg:text-lg"
                  >
                    {{ currentStep === 1 ? 'Real-time Monitoring' : 'Advanced Integrations' }}
                  </h3>
                  <p class="text-gray-600 dark:text-gray-300 text-xs">
                    {{
                      currentStep === 1
                        ? 'Stay connected with live updates and instant notifications'
                        : 'Connect with your favorite tools and automate processes'
                    }}
                  </p>
                </div>
              </div>
            </div>

            <div class="flex justify-center items-center gap-2 mt-4 md:mt-6 text-emerald-400">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 22S8 18 8 13V6L12 4L16 6V13C16 18 12 22 12 22Z"
                ></path>
              </svg>
              <span class="font-medium text-xs">Enterprise-grade security</span>
            </div>
          </div>

          <div
            class="-top-24 md:-top-32 -right-24 md:-right-32 absolute bg-emerald-500/20 blur-3xl rounded-full w-48 md:w-72 h-48 md:h-72"
          ></div>
        </div>
      </div>
    </div>
  </div>
</div>
